* { box-sizing: border-box; }
html, body { margin: 0; padding: 0; height: 100%; }

.skip-link {
  position: absolute;
  width: 1px; height: 1px;
  padding: 0; margin: -1px;
  overflow: hidden; clip: rect(0,0,0,0);
  white-space: nowrap; border: 0;
}
.skip-link:focus {
  position: fixed;
  width: auto; height: auto;
  padding: 0.5rem 1rem;
  margin: 0;
  top: 1rem; left: 1rem;
  z-index: 9999;
  background: #3b82f6;
  color: white;
  border-radius: 4px;
  overflow: visible;
  clip: auto;
}

.app {
  height: 100vh;
  display: flex;
  flex-direction: column;
  background: #0c0e12;
  color: #e2e6ec;
}

.header {
  flex-shrink: 0;
  border-bottom: 1px solid #2a303c;
  background: rgba(12, 14, 18, 0.95);
  padding: 0.75rem 1rem;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 1rem;
}
.header-left { display: flex; align-items: center; gap: 0.75rem; }
.title { font-size: 1.125rem; font-weight: 600; margin: 0; letter-spacing: -0.02em; }
.tagline { font-size: 0.75rem; color: #6b7280; }
@media (max-width: 640px) { .tagline { display: none; } }
.header-controls { display: flex; align-items: center; gap: 0.5rem; font-size: 0.75rem; color: #9ca3af; }
.header-controls select {
  background: #161a22;
  border: 1px solid #2a303c;
  border-radius: 4px;
  padding: 0.25rem 0.5rem;
  color: #e2e6ec;
}
.updated-label { font-size: 0.75rem; }
.btn-new { padding: 0.25rem 0.5rem; border-radius: 4px; background: #065f46; color: #6ee7b7; border: none; cursor: pointer; }
.btn-refresh { padding: 0.25rem 0.5rem; border-radius: 4px; background: #1f2430; color: #e2e6ec; border: none; cursor: pointer; }
.btn-refresh:hover { background: #2a303c; }

.main-row { flex: 1; display: flex; min-height: 0; }
.sidebar {
  width: 100%;
  max-width: 400px;
  flex-shrink: 0;
  border-right: 1px solid #2a303c;
  background: #0c0e12;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}
.sidebar-inner { padding: 0.75rem; border-bottom: 1px solid #2a303c; overflow-y: auto; flex: 1; }
.filters { display: flex; gap: 0.5rem; flex-wrap: wrap; margin-bottom: 0.5rem; }
.filters select {
  background: #161a22;
  border: 1px solid #2a303c;
  border-radius: 4px;
  padding: 0.375rem 0.5rem;
  font-size: 0.875rem;
  color: #e2e6ec;
}
.btn-report {
  padding: 0.375rem 0.5rem;
  border-radius: 4px;
  background: #1f2430;
  color: #e2e6ec;
  border: 1px solid #2a303c;
  font-size: 0.875rem;
  cursor: pointer;
}
.btn-report:hover { background: #2a303c; }
.links-row { display: flex; gap: 0.5rem; flex-wrap: wrap; margin-bottom: 0.5rem; }
.link-btn {
  background: none;
  border: none;
  font-size: 0.75rem;
  color: #93c5fd;
  cursor: pointer;
  padding: 0;
  text-decoration: underline;
}
.link-btn:hover { color: #bfdbfe; }
.link-btn.warn { color: #f59e0b; }
.link-btn.ai-btn { color: #a78bfa; }
.panel {
  padding: 0.75rem;
  border: 1px solid #2a303c;
  border-radius: 8px;
  background: #161a22;
  font-size: 0.75rem;
  margin-bottom: 0.5rem;
}
.panel h3 { margin: 0 0 0.5rem; font-size: 0.875rem; }
.panel p { margin: 0.25rem 0; color: #9ca3af; }
.panel ul { margin: 0.5rem 0; padding-left: 1rem; }
.panel a { color: #93c5fd; }
.fetch-error {
  padding: 0.5rem;
  border-radius: 4px;
  background: rgba(127, 29, 29, 0.3);
  border: 1px solid #991b1b;
  color: #fca5a5;
  font-size: 0.75rem;
  margin-bottom: 0.5rem;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.5rem;
}
.fetch-error button { padding: 0.25rem 0.5rem; border-radius: 4px; background: #991b1b; color: white; border: none; cursor: pointer; }
.report-form { padding: 0.75rem; border: 1px solid #2a303c; border-radius: 8px; background: #161a22; margin-bottom: 0.5rem; }
.report-form input, .report-form textarea {
  width: 100%;
  background: #0c0e12;
  border: 1px solid #2a303c;
  border-radius: 4px;
  padding: 0.375rem 0.5rem;
  font-size: 0.875rem;
  color: #e2e6ec;
  margin-bottom: 0.5rem;
}
.form-note { font-size: 0.75rem; color: #9ca3af; margin: 0 0 0.25rem; }
.form-warn { font-size: 0.75rem; color: #f59e0b; margin: 0 0 0.5rem; }
.form-actions { display: flex; gap: 0.5rem; }
.btn-primary { padding: 0.25rem 0.5rem; border-radius: 4px; background: #3b82f6; color: white; border: none; cursor: pointer; font-size: 0.875rem; }
.btn-secondary { padding: 0.25rem 0.5rem; border-radius: 4px; background: #2a303c; color: #e2e6ec; border: none; cursor: pointer; font-size: 0.875rem; }
.meta-row { display: flex; align-items: center; gap: 0.5rem; flex-wrap: wrap; margin-bottom: 0.5rem; }
.feed-count { font-size: 0.75rem; color: #6b7280; }
.ai-block { border-top: 1px solid #2a303c; padding-top: 0.5rem; margin-bottom: 0.5rem; }
.ai-hint { font-size: 0.625rem; color: #6b7280; margin: 0.25rem 0; }
.ai-error { font-size: 0.625rem; color: #f87171; margin-top: 0.25rem; }
.ai-result {
  margin-top: 0.5rem;
  padding: 0.5rem;
  border: 1px solid #2a303c;
  border-radius: 4px;
  background: #161a22;
  font-size: 0.75rem;
  color: #9ca3af;
  white-space: pre-wrap;
}
.ai-badge { font-size: 0.625rem; color: #a78bfa; text-transform: uppercase; margin-right: 0.5rem; }
.feed-container { padding: 0.5rem; }
.feed-heading { font-size: 0.75rem; font-weight: 500; color: #9ca3af; margin: 0 0 0.5rem; padding: 0 0.25rem; }
.feed-loading { text-align: center; color: #6b7280; padding: 2rem; }
.feed-list { list-style: none; margin: 0; padding: 0; }
.feed-list li { margin-bottom: 0.5rem; }
.feed-item {
  border-radius: 8px;
  border: 1px solid #2a303c;
  background: #161a22;
  padding: 0.75rem;
  cursor: pointer;
  transition: background 0.15s;
}
.feed-item:hover { background: #1f2430; }
.feed-item.selected { border-color: #3b82f6; background: rgba(30, 58, 95, 0.3); }
.feed-item a { font-weight: 500; font-size: 0.875rem; color: #93c5fd; text-decoration: none; }
.feed-item a:hover { text-decoration: underline; }
.feed-meta { display: flex; align-items: center; gap: 0.5rem; margin-top: 0.25rem; font-size: 0.75rem; color: #9ca3af; }
.feed-source { color: #6b7280; }
.feed-empty { text-align: center; color: #6b7280; padding: 2rem; }
.map-wrap { flex: 1; min-width: 0; position: relative; }
.map { height: 100%; width: 100%; background: #0c0e12; }
.footer {
  flex-shrink: 0;
  border-top: 1px solid #2a303c;
  padding: 0.5rem 1rem;
  font-size: 0.75rem;
  color: #6b7280;
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 0.5rem 1rem;
}
.footer a { color: #93c5fd; }

.leaflet-container { font-family: inherit; background: #0c0e12; }
.leaflet-popup-content-wrapper { background: #161a22; color: #e2e6ec; border-radius: 8px; border: 1px solid #2a303c; }
.leaflet-popup-tip { background: #161a22; }
.leaflet-popup-close-button { color: #9ca3af; }
.leaflet-control-zoom a { background: #161a22 !important; color: #e2e6ec !important; border-color: #2a303c !important; }
.leaflet-control-zoom a:hover { background: #1f2430 !important; }
.leaflet-control-attribution { background: rgba(12,14,18,0.8) !important; color: #6b7280 !important; font-size: 10px; }
.leaflet-control-attribution a { color: #9ca3af; }

.zoom-buttons {
  position: absolute;
  top: 1rem;
  right: 1rem;
  z-index: 1000;
}
.zoom-buttons .leaflet-control {
  border-radius: 8px;
  overflow: hidden;
  border: 1px solid #2a303c;
}
.zoom-buttons button {
  width: 36px; height: 36px;
  background: #161a22;
  color: #e2e6ec;
  border: none;
  border-bottom: 1px solid #2a303c;
  cursor: pointer;
  font-size: 1.25rem;
  line-height: 1;
}
.zoom-buttons button:last-child { border-bottom: none; }
.zoom-buttons button:hover { background: #1f2430; }
